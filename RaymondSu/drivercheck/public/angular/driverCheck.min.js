(function(){angular.module("driverCheck",["ngRoute","ngSanitize","ui.bootstrap"]);function e(e,t){e.when("/",{templateUrl:"/auth/login/login.view.html",controller:"loginCtrl",controllerAs:"vm"}).when("/auth",{templateUrl:"/company/company.list.view.html",controller:"companylistCtrl",controllerAs:"vm"}).when("/auth/create",{templateUrl:"/company/company.create.view.html",controller:"companycreateCtrl",controllerAs:"vm"}).when("/auth/edit/:companyId",{templateUrl:"/company/company.edit.view.html",controller:"companyeditCtrl",controllerAs:"vm"}).when("/auth/detail/:companyId",{templateUrl:"/company/company.detail.view.html",controller:"companydetailCtrl",controllerAs:"vm"}).when("/auth/employee/create/:companyId",{templateUrl:"/employee/employee.create.view.html",controller:"employeecreateCtrl",controllerAs:"vm"}).when("/auth/employee/edit/:companyId/:employeeId",{templateUrl:"/employee/employee.edit.view.html",controller:"employeeeditCtrl",controllerAs:"vm"}).when("/auth/employee/detail/:companyId/:employeeId",{templateUrl:"/employee/employee.detail.view.html",controller:"employeedetailCtrl",controllerAs:"vm"}).when("/auth/employee/test/create/:companyId/:employeeId",{templateUrl:"/test/test.create.view.html",controller:"testcreateCtrl",controllerAs:"vm"}).when("/auth/employee/test/edit/:companyId/:employeeId/:testId",{templateUrl:"/test/test.edit.view.html",controller:"testeditCtrl",controllerAs:"vm"}).when("/about",{templateUrl:"/common/views/genericText.view.html",controller:"aboutCtrl",controllerAs:"vm"}).when("/location/:locationid",{templateUrl:"/locationDetail/locationDetail.view.html",controller:"locationDetailCtrl",controllerAs:"vm"}).when("/register",{templateUrl:"/auth/register/register.view.html",controller:"registerCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"});t.html5Mode(true)}angular.module("driverCheck").config(["$routeProvider","$locationProvider",e])})();(function(){angular.module("driverCheck").controller("companylistCtrl",e);e.$inject=["$scope","$location","driverCheckData"];function e(e,t,o){var n=this;console.log(window.location);n.pageHeader={title:"Company List"};o.getCompanies().then(function(e){n.message=e.data.length>0?"":"Nothing found";n.data={companies:e.data};console.log(n.data)},function(e){n.message="Sorry, something's gone wrong, please try again later"});n.deleteCompany=function(e,t){o.deleteCompany(t).then(function(){location.reload()},function(e){n.message="Sorry, something's gone wrong, please try again later"})};n.showError=function(t){e.$apply(function(){n.message=t.message})}}})();(function(){angular.module("driverCheck").controller("companyeditCtrl",e);e.$inject=["$location","$routeParams","driverCheckData"];function e(e,t,o){var n=this;n.pageHeader={title:"Edit Company"};n.company={name:"",address:""};o.getCompanyById(t.companyId).then(function(e){n.company=e.data;console.log(n.company)},function(e){n.message="Sorry, something's gone wrong, please try again later"});n.onSubmit=function(){n.formError="";if(!n.company.name||!n.company.address){n.formError="All fields required, please try again";return false}else{o.updateCompanyById(t.companyId,n.company).then(function(t){e.path("/")},function(e){n.message="Sorry, something's gone wrong, please try again later"})}}}})();(function(){angular.module("driverCheck").controller("companycreateCtrl",e);e.$inject=["$location","driverCheckData"];function e(e,t){var o=this;o.pageHeader={title:"Create Company"};o.onSubmit=function(){o.formError="";if(!o.company.name||!o.company.address){o.formError="All fields required, please try again";return false}else{t.createCompany(o.company).then(function(t){e.path("/")},function(e){o.message="Sorry, something's gone wrong, please try again later"})}}}})();(function(){angular.module("driverCheck").controller("companydetailCtrl",e);e.$inject=["$scope","$location","driverCheckData","$routeParams"];function e(e,t,o,n){var r=this;console.log(window.location);r.pageHeader={title:"Company Detail"};o.getCompanyById(n.companyId).then(function(e){r.company=e.data;console.log(r.company)},function(e){r.message="Sorry, something's gone wrong, please try again later"});r.deleteEmployee=function(e,t){o.deleteEmployee(e,t).then(function(){location.reload()},function(e){r.message="Sorry, something's gone wrong, please try again later"})};r.showError=function(t){e.$apply(function(){r.message=t.message})}}})();(function(){angular.module("driverCheck").controller("employeecreateCtrl",e);e.$inject=["$location","$routeParams","driverCheckData"];function e(e,t,o){var n=this;n.pageHeader={title:"New Employee"};n.onSubmit=function(){n.formError="";if(!n.emp.name||!n.emp.address){n.formError="All fields required, please try again";return false}else{var r=t.companyId;o.createEmployee(r,n.emp).then(function(o){e.path("/auth/detail/"+t.companyId)},function(e){n.message="Sorry, something's gone wrong, please try again later"})}}}})();(function(){angular.module("driverCheck").controller("employeeeditCtrl",e);e.$inject=["$location","$routeParams","driverCheckData"];function e(e,t,o){var n=this;n.pageHeader={title:"Edit Employee"};n.emp={name:"",address:""};o.getEmployeeById(t.companyId,t.employeeId).then(function(e){n.emp=e.data;console.log(n.emp)},function(e){n.message="Sorry, something's gone wrong, please try again later"});n.onSubmit=function(){n.formError="";if(!n.emp.name||!n.emp.address){n.formError="All fields required, please try again";return false}else{o.updateEmployee(t.companyId,t.employeeId,n.emp).then(function(o){e.path("/auth/"+t.companyId)},function(e){n.message="Sorry, something's gone wrong, please try again later"})}}}})();(function(){angular.module("driverCheck").controller("employeedetailCtrl",e);e.$inject=["$scope","$location","driverCheckData","$routeParams"];function e(e,t,o,n){var r=this;console.log(window.location);r.pageHeader={title:"Employee Detail"};r.emp={name:"",address:""};o.getEmployeeById(n.companyId,n.employeeId).then(function(e){r.emp=e.data;r.emp.companyId=n.companyId;console.log(r.emp)},function(e){r.message="Sorry, something's gone wrong, please try again later"});r.deleteTest=function(e,t,n){o.deleteTest(e,t,n).then(function(){location.reload()},function(e){r.message="Sorry, something's gone wrong, please try again later"})};r.showError=function(t){e.$apply(function(){r.message=t.message})};r.noGeo=function(){e.$apply(function(){r.message="Geolocation is not supported by this browser."})}}})();(function(){angular.module("driverCheck").controller("testcreateCtrl",e);e.$inject=["$location","$routeParams","driverCheckData"];function e(e,t,o){var n=this;n.pageHeader={title:"New Test"};n.test={result:"",testDate:""};n.onSubmit=function(){n.formError="";if(n.test.result===""||n.test.testDate&&isNaN(Date.parse(n.test.testDate))){n.formError="All fields required, please try again";console.log(n.test.testDate);return false}else{var r=t.companyId;o.createTest(r,t.employeeId,n.test).then(function(o){e.path("/auth/employee/detail/"+t.companyId+"/"+t.employeeId)},function(e){n.message="Sorry, something's gone wrong, please try again later"})}}}})();(function(){angular.module("driverCheck").controller("testeditCtrl",e);e.$inject=["$location","$routeParams","driverCheckData","$filter"];function e(e,t,o,n){var r=this;r.pageHeader={title:"Edit Test Result"};r.test={result:"",testDate:""};o.getTestById(t.companyId,t.employeeId,t.testId).then(function(e){r.test=e.data;r.test.testDate=n("date")(r.test.testDate,"MMMM dd, yyyy");console.log(r.test)},function(e){r.message="Sorry, something's gone wrong, please try again later"});r.onSubmit=function(){r.formError="";if(r.test.result===""||r.test.testDate&&isNaN(Date.parse(r.test.testDate))){r.formError="All fields required, please try again";return false}else{o.updateTest(t.companyId,t.employeeId,t.testId,r.test).then(function(o){console.log(o);e.path("/auth/employee/detail/"+t.companyId+"/"+t.employeeId)},function(e){r.message="Sorry, something's gone wrong, please try again later"})}}}})();(function(){angular.module("driverCheck").controller("loginCtrl",e);e.$inject=["$location","authentication"];function e(e,t){var o=this;o.pageHeader={title:"Sign in"};if(t.isLoggedIn())e.path("/auth");o.email="";o.password="";o.onSubmit=function(){o.formError="";if(!o.email||!o.password){o.formError="All fields required, please try again";return false}else{t.login(o.email);e.path("/auth")}}}})();(function(){angular.module("driverCheck").service("authentication",e);e.$inject=["$http","$window"];function e(e,t){var o="drivertoken";var n=function(){if(t.localStorage[o]){console.log("loggedin");return true}return false;console.log("not in")};var r=function(){return t.localStorage[o]};var a=function(e){t.localStorage[o]=e};var l=function(){t.localStorage.removeItem(o)};return{isLoggedIn:n,login:a,logout:l,currentUser:r}}})();(function(){angular.module("driverCheck").service("driverCheckData",e);e.$inject=["$http","authentication"];function e(e,t){var o=function(){return e.get("/api/companies")};var n=function(t){return e.get("/api/companies/"+t)};var r=function(t,o){return e.put("/api/companies/"+t,o)};var a=function(t){return e.post("/api/companies",t)};var l=function(t){return e.delete("/api/companies/"+t)};var i=function(t,o){return e.post("/api/employees/"+t,o)};var c=function(t,o){return e.get("/api/employees/"+t+"/"+o)};var s=function(t,o,n){return e.put("/api/employees/"+t+"/"+o,n)};var m=function(t,o){return e.delete("/api/employees/"+t+"/"+o)};var p=function(t,o,n){return e.post("/api/tests/"+t+"/"+o,n)};var u=function(t,o,n){return e.get("/api/tests/"+t+"/"+o+"/"+n)};var d=function(t,o,n,r){return e.put("/api/tests/"+t+"/"+o+"/"+n,r)};var g=function(t,o,n){return e.delete("/api/tests/"+t+"/"+o+"/"+n)};return{getCompanies:o,getCompanyById:n,createCompany:a,updateCompanyById:r,deleteCompany:l,createEmployee:i,getEmployeeById:c,updateEmployee:s,deleteEmployee:m,createTest:p,getTestById:u,updateTest:d,deleteTest:g}}t.$inject=["$http","$q"];function t(e,t){var o=function(e,o){var n=t.defer();setTimeout(function(){n.resolve([{_id:"1",name:"client1"},{_id:"1",name:"client2"},{_id:"1",name:"client3"},{_id:"1",name:"client4"}])});return n.promise};return{getCompanies:o}}})();(function(){angular.module("driverCheck").controller("navigationCtrl",e);e.$inject=["$location","authentication"];function e(e,t){var o=this;o.currentPath=e.path();o.isLoggedIn=t.isLoggedIn();o.currentUser=t.currentUser();o.logout=function(){t.logout();e.path("/")}}})();(function(){angular.module("driverCheck").directive("navigation",e);function e(){return{restrict:"EA",templateUrl:"/common/directives/navigation/navigation.template.html",controller:"navigationCtrl as navvm"}}})();(function(){angular.module("driverCheck").directive("footerGeneric",e);function e(){return{restrict:"EA",templateUrl:"/common/directives/footerGeneric/footerGeneric.template.html"}}})();(function(){angular.module("driverCheck").directive("pageHeader",e);function e(){return{restrict:"EA",scope:{content:"=content"},templateUrl:"/common/directives/pageHeader/pageHeader.template.html"}}})();